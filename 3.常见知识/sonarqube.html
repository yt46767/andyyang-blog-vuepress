<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>andy的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/andyyang-blog-vuepress/favicon.ico">
    <link rel="manifest" href="/andyyang-blog-vuepress/manifest.json">
    <link rel="apple-touch-icon" href="/andyyang-blog-vuepress/andyyang-blog-vuepress/icons/icon-152x152.png">
    <link rel="preconnect" href="https://ZHEDSTO6YB-dsn.algolia.net" crossorigin="true">
    <meta name="description" content="My note space build with vuepress">
    <meta property="article:modified_time" content="2022-09-16T13:10:52.000Z">
    <meta property="og:site_name" content="andy的博客">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/3.%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/sonarqube.html">
    <meta name="twitter:url" content="/3.%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/sonarqube.html">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="mulinzi">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="theme-color" content="rgba(255, 255, 255, 0.95)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/andyyang-blog-vuepress/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/andyyang-blog-vuepress/assets/css/356.styles.7f5b43fa.css" as="style"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/chunk-default.21cc7129.js" as="script"><link rel="preload" href="/andyyang-blog-vuepress/assets/css/0.styles.2729282c.css" as="style"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/vendors~app.911457c4.js" as="script"><link rel="preload" href="/andyyang-blog-vuepress/assets/css/styles.bdb43170.css" as="style"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/app.77efb429.js" as="script"><link rel="preload" href="/andyyang-blog-vuepress/assets/css/369.styles.5ba6a8df.css" as="style"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/369.8ae23cd4.js" as="script"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/928.bb7cfc2e.js" as="script"><link rel="preload" href="/andyyang-blog-vuepress/assets/css/364.styles.875f7ca2.css" as="style"><link rel="preload" href="/andyyang-blog-vuepress/assets/js/364.6411275a.js" as="script">
    <link rel="stylesheet" href="/andyyang-blog-vuepress/assets/css/356.styles.7f5b43fa.css"><link rel="stylesheet" href="/andyyang-blog-vuepress/assets/css/0.styles.2729282c.css"><link rel="stylesheet" href="/andyyang-blog-vuepress/assets/css/styles.bdb43170.css"><link rel="stylesheet" href="/andyyang-blog-vuepress/assets/css/369.styles.5ba6a8df.css"><link rel="stylesheet" href="/andyyang-blog-vuepress/assets/css/364.styles.875f7ca2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="doc" class="v-application v-application--is-ltr theme--light" data-v-85cb3d8a><div class="v-application--wrap"><!----> <header class="v-sheet theme--light elevation-0 v-toolbar v-toolbar--dense v-app-bar v-app-bar--clipped" style="height:48px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;" data-v-7a69d0a6 data-v-85cb3d8a><div class="v-toolbar__content" style="height:48px;"><button type="button" class="v-app-bar__nav-icon v-btn v-btn--icon v-btn--round theme--light v-size--default" data-v-7a69d0a6><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu theme--light" data-v-7a69d0a6></i></span></button> <div class="spacer" data-v-7a69d0a6></div> <div class="v-menu" data-v-7a69d0a6><button type="button" class="account-menu v-btn v-btn--text theme--light v-size--large" data-v-7a69d0a6><span class="v-btn__content"><div class="v-avatar mr-2" style="height:36px;min-width:36px;width:36px;" data-v-7a69d0a6><img src="/andyyang-blog-vuepress/assets/img/me.f91f18c4.png" alt="mulinzi" data-v-7a69d0a6></div> <span class="pl-1 pr-1" data-v-7a69d0a6>Andyyang</span> <i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light" data-v-7a69d0a6></i></span></button><!----></div></div></header> <nav class="v-navigation-drawer v-navigation-drawer--clipped v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100vh;top:0px;transform:translateX(-100%);width:300px;" data-v-67c32539 data-v-85cb3d8a><div class="v-navigation-drawer__content"><div class="v-input mx-2 mt-3 v-input--hide-details v-input--dense theme--light v-text-field v-text-field--enclosed v-text-field--outlined" data-v-67c32539><div class="v-input__control"><div class="v-input__slot"><fieldset aria-hidden="true"><legend style="width:0px;"><span class="notranslate">&#8203;</span></legend></fieldset><div class="v-text-field__slot"><label for="input-29338" class="v-label theme--light" style="left:0px;right:auto;position:absolute;">查找笔记文件</label><input id="input-29338" type="text"></div><div class="v-input__append-inner"><div></div></div><div class="v-input__append-inner"><div class="v-input__icon v-input__icon--append"><i aria-hidden="true" class="v-icon notranslate mdi mdi-magnify theme--light"></i></div></div></div></div></div> <div class="v-treeview v-treeview--hoverable theme--light" data-v-67c32539><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            1.基础知识
          </div></span></div></div></div><!----></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            2.进阶知识
          </div></span></div></div></div><!----></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            3.常见知识
          </div></span></div></div></div><!----></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            4.常见问题
          </div></span></div></div></div><!----></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            5.图书馆
          </div></span></div></div></div><!----></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--click"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__prepend"><i aria-hidden="true" class="v-icon notranslate mdi mdi-folder theme--light" data-v-67c32539></i></div><div class="v-treeview-node__label"><span class="v-tooltip v-tooltip--right" data-v-67c32539><!----><div aria-haspopup="true" aria-expanded="false" class="leaf-label" data-v-67c32539>
            6.资源
          </div></span></div></div></div><!----></div></div></div><div class="v-navigation-drawer__border"></div></nav> <main class="v-main" style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;" data-v-85cb3d8a><div class="v-main__wrap"><!----> <div id="scroll-body" class="theme-container py-sm-10 py-0" data-v-85cb3d8a><div class="theme-default-content d-flex flex-column pa-sm-6 pa-2" data-v-85cb3d8a><div class="content__default"><p>阐述：</p> <p>sonarqube是集成<strong>多种开发语言的多个检测工具</strong>于一身，检测会包罗万象！！！</p> <h2 id="有eslint-tslint等工具-还要sonar干嘛"><a href="#有eslint-tslint等工具-还要sonar干嘛" class="header-anchor">#</a> 有eslint, tslint等工具，还要sonar干嘛</h2> <p>首先需要说的是，这两者不是一个层级的东西，eslint, tslint是js代码，ts代码的风格检查工具，其定义一些代码编写风格，主要通过这些风格规范个人的代码。</p> <p>而sonar是一个代码质量管理平台，其支持多种语言，多种检查工具，并将这些 <a href="http://www.codercto.com/tool.html" target="_blank" rel="noopener noreferrer">工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的结果统一化展示，比如对于js,ts代码，sonar就有eslint，tslint等的插件可以集成进去，统一检查。</p> <h2 id="sonarqube在window下使用全解"><a href="#sonarqube在window下使用全解" class="header-anchor">#</a> sonarqube在window下使用全解</h2> <ol><li><p>下载、安装、启动软件：</p> <ul><li><p>sonarqube：https://www.sonarqube.org/success-download-community-edition/</p> <p><strong>（特别注意：SonarQube 7.9以上版本已不再支持mysql）</strong></p> <p>版本：win 64， 9.0.0.45539</p> <p>端口：9999</p> <p>用户名：admin</p> <p>密码：admin123</p> <p>sonar.properties配置：</p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723164720085.png" alt=""></p></li> <li><p>SonarQube+Scanner：https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.6.2.2472-windows.zip</p> <p>版本：win 64，4.6.2.2472</p> <p>静态代码扫描工具</p> <p>sonar-scanner.properties配置：</p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723164456576.png" alt=""></p></li> <li><p>PostgreSQL：https://www.enterprisedb.com/postgresql-tutorial-resources-training?cid=71</p> <p>版本：win 64，9.6</p> <p>用户名：postgres</p> <p>密码：admin</p> <p>端口：5432</p> <p>cmd登录：psql -U postgres -h localhost</p> <p>超级用户postgres</p> <p>注：</p> <ul><li><p>数据库操作：</p> <ul><li><p>查看所有数据库： <code>\l</code></p></li> <li><p>切换postgres数据库：<code>\c postgres</code></p></li> <li><p>查看所有模式：<code>\dnS</code></p></li> <li><p>创建my_schema模式：<code>create schema my_schema;</code></p></li></ul></li> <li><p>sonar配置：<code>jdbc:postgresql://localhost:5432/mydatabase?currentSchema=myschema</code></p> <p>https://blog.csdn.net/sanyuedexuanlv/article/details/84615388</p></li></ul></li> <li><p>参考：</p> <ul><li>sonarqube下载与安装教程：https://www.cnblogs.com/jiangyaxiong1990/p/12943886.html</li> <li>PostgreSQL安装教程：https://jingyan.baidu.com/article/7e44095318972a2fc0e2ef89.html</li> <li>使用教程+用PostgreSQL（重要）：https://blog.csdn.net/weixin_42128393/article/details/113006138</li></ul></li> <li><p>sonarqube低版本关注：</p> <p>mysql</p> <ul><li><p>下载：</p></li> <li><p>https://downloads.mysql.com/archives/community/</p> <p>建数据库使其生效的命令：<code>FLUSH PRIVILEGES;</code></p></li></ul> <p>参考：</p> <ul><li>使用教程+用mysql（重要）：https://blog.csdn.net/xiaodaiwang/article/details/78143802</li></ul></li></ul></li> <li><p>搭建成功后，在要检测代码质量分析的项目下，执行命令：</p> <p><code>sonar-scanner -D&quot;sonar.projectKey=VUE-DATEPICKER-LOCAL&quot; -D&quot;sonar.sources=.&quot; -D&quot;sonar.host.url=http://localhost:9999&quot; -D&quot;sonar.login=1f38a5d42b35db4a380628ca2a9762d22ff050c7&quot;</code></p> <p>执行成功：</p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723165803215.png" alt=""></p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723165727690.png" alt=""></p> <p>查看分析结果：</p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723165825983.png" alt=""></p> <p>参考：</p> <ul><li>项目如何检测代码质量分析（重要）：https://www.cnblogs.com/qiu-tian/p/13328146.html</li></ul></li> <li><p>ci集成</p> <p>流程图：</p> <p><img src="https://inews.gtimg.com/newsapp_bt/0/13777765798/641" alt="img"></p> <p>原理图：</p> <p><img src="https://img-blog.csdnimg.cn/20190608120550562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDY4NjYwMw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>参考：</p> <ul><li><p>运行原理：https://blog.csdn.net/weixin_40686603/article/details/91323559</p></li> <li><p>流程图：https://xw.qq.com/cmsid/20210717A09WFQ00</p></li></ul></li> <li><p>sonarqube生成token</p> <p><img src="https://img-blog.csdnimg.cn/20200523150746871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdHRsZV9rZWx2aW4=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p><img src="https://img-blog.csdnimg.cn/20200523150817122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdHRsZV9rZWx2aW4=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>参考：</p> <ul><li><p>sonarqube生成token的教程（重要）：</p> <p>https://blog.csdn.net/little_kelvin/article/details/106300050</p></li></ul></li> <li><p>gitlab-ci集成sonarqube：</p> <p>检测的项目，增加gitlab-ci.yml配置：</p> <div class="language- extra-class"><pre class="language-text"><code>sonar_preview:
  stage: test
  script:
    - /usr/local/sonar-scanner/bin/sonar-scanner -Dsonar.projectKey=java -Dsonar.sources=. -Dsonar.host.url=http://172.16.68.154:9000  -Dsonar.login=13585323c4c8ac257c590d6e49c7b59dda5192f8
  only:
    - master
  tags:
    - my-runner
</code></pre></div><p>注：13585323c4c8ac257c590d6e49c7b59dda5192f8是sonarqube生成token。</p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723155854761.png" alt=""></p> <p><img src="https://gitee.com/yt46767/doc/raw/master/image-20210723155910938.png" alt=""></p> <p>参考：</p> <ul><li>gitlab-ci集成sonarqube（成功实践）https://www.cnblogs.com/lina-2159/p/13474542.html</li></ul></li></ol></div> <div class="spacer"></div> <div class="prev-next d-none d-sm-flex justify-space-between mt-9" data-v-cf01dfa6><button type="button" class="ml-n4 v-btn v-btn--plain theme--light v-size--default primary--text" data-v-cf01dfa6><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate v-icon--dense mdi mdi-arrow-left theme--light" data-v-cf01dfa6></i> <span data-v-cf01dfa6>react</span></span></button> <div class="spacer" data-v-cf01dfa6 data-v-cf01dfa6></div> <button type="button" class="mr-n4 v-btn v-btn--plain theme--light v-size--default primary--text" data-v-cf01dfa6><span class="v-btn__content"><span data-v-cf01dfa6>sourcetree</span> <i aria-hidden="true" class="v-icon notranslate v-icon--dense mdi mdi-arrow-right theme--light" data-v-cf01dfa6></i></span></button></div></div></div> <div class="v-menu" data-v-85cb3d8a><!----></div> <button type="button" class="to-top v-btn v-btn--bottom v-btn--is-elevated v-btn--fab v-btn--fixed v-btn--has-bg v-btn--right v-btn--round theme--light v-size--default" style="display:none;" data-v-85cb3d8a data-v-85cb3d8a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-arrow-expand-up theme--light primary--text" data-v-85cb3d8a></i></span></button></div></main> <!----></div></div><div class="global-ui"><div class="v-snack v-snack--bottom v-snack--has-background v-snack--right v-snack--vertical" style="padding-bottom:0px;padding-left:0px;padding-right:0px;padding-top:0px;" data-v-fec8b358><div class="v-snack__wrapper v-sheet theme--dark" style="max-width:0px;display:none;"><div role="status" aria-live="polite" class="v-snack__content">
    作者又有了新的笔记哟，点击刷新查看
    </div><div class="v-snack__action "><button type="button" class="v-btn v-btn--text theme--dark v-size--default v-snack__btn"><span class="v-btn__content">
        刷新
      </span></button></div></div></div></div></div>
    <script src="/andyyang-blog-vuepress/assets/js/chunk-default.21cc7129.js" defer></script><script src="/andyyang-blog-vuepress/assets/js/369.8ae23cd4.js" defer></script><script src="/andyyang-blog-vuepress/assets/js/928.bb7cfc2e.js" defer></script><script src="/andyyang-blog-vuepress/assets/js/364.6411275a.js" defer></script><script src="/andyyang-blog-vuepress/assets/js/vendors~app.911457c4.js" defer></script><script src="/andyyang-blog-vuepress/assets/js/app.77efb429.js" defer></script>
  </body>
</html>
